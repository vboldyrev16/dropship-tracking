╔══════════════════════════════════════════════════════════════════════════════╗
║                    SHOPIFY APP DEPLOYMENT FLOW                               ║
╚══════════════════════════════════════════════════════════════════════════════╝

STEP 1: DEPLOY TO HEROKU (10 minutes)
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  YOUR COMPUTER                 HEROKU CLOUD                                 │
│  ┌──────────┐                 ┌────────────────────┐                       │
│  │          │   git push      │                    │                       │
│  │  Code    │ ───────────────▶│  Web Dyno          │ ← Your app            │
│  │          │                 │  (Remix app)       │                       │
│  └──────────┘                 └────────────────────┘                       │
│                                                                              │
│                                ┌────────────────────┐                       │
│                                │  Worker Dyno       │ ← Background jobs     │
│                                │  (BullMQ worker)   │                       │
│                                └────────────────────┘                       │
│                                                                              │
│                                ┌────────────────────┐                       │
│                                │  PostgreSQL        │ ← Database            │
│                                │                    │                       │
│                                └────────────────────┘                       │
│                                                                              │
│                                ┌────────────────────┐                       │
│                                │  Redis             │ ← Job queue           │
│                                │                    │                       │
│                                └────────────────────┘                       │
│                                                                              │
│  Commands:                                                                  │
│  1. heroku create your-app-name                                             │
│  2. heroku addons:create heroku-postgresql:essential-0                      │
│  3. heroku addons:create heroku-redis:mini                                  │
│  4. heroku config:set [environment variables]                               │
│  5. git push heroku main                                                    │
│  6. heroku ps:scale worker=1                                                │
│                                                                              │
│  Result: https://your-app-name.herokuapp.com                                │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

STEP 2: CONFIGURE SHOPIFY APP (5 minutes)
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  SHOPIFY PARTNERS DASHBOARD (partners.shopify.com)                          │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │                                                                         │ │
│  │  Create App                                                             │ │
│  │  ┌────────────────────────────────────────────────────────────────┐   │ │
│  │  │ App name: Private Label Tracking                               │   │ │
│  │  │ App URL: https://your-app-name.herokuapp.com                   │   │ │
│  │  │ Redirect: https://your-app-name.herokuapp.com/auth/callback    │   │ │
│  │  └────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  │  App Proxy Configuration                                                │ │
│  │  ┌────────────────────────────────────────────────────────────────┐   │ │
│  │  │ Subpath prefix: apps                                           │   │ │
│  │  │ Subpath: track                                                 │   │ │
│  │  │ Proxy URL: https://your-app-name.herokuapp.com/apps            │   │ │
│  │  └────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  │  API Scopes                                                             │ │
│  │  ☑ read_orders     ☑ write_orders                                      │ │
│  │  ☑ read_fulfillments ☑ write_fulfillments                              │ │
│  │                                                                         │ │
│  │  Client credentials                                                     │ │
│  │  Client ID: abc123...    (copy this)                                   │ │
│  │  Client secret: xyz789... (copy this)                                  │ │
│  │                                                                         │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  Then run:                                                                  │
│  heroku config:set SHOPIFY_API_KEY=abc123...                               │
│  heroku config:set SHOPIFY_API_SECRET=xyz789...                            │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

STEP 3: CONFIGURE 17TRACK (3 minutes)
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  17TRACK API DASHBOARD (17track.net/en/api)                                 │
│  ┌───────────────────────────────────────────────────────────────────────┐ │
│  │                                                                         │ │
│  │  API Key Management                                                     │ │
│  │  ┌────────────────────────────────────────────────────────────────┐   │ │
│  │  │ API Key: 17track_abc123xyz...  (copy this)                     │   │ │
│  │  └────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  │  Webhook Settings                                                       │ │
│  │  ┌────────────────────────────────────────────────────────────────┐   │ │
│  │  │ Webhook URL:                                                    │   │ │
│  │  │ https://your-app-name.herokuapp.com/webhooks/17track           │   │ │
│  │  │                                                                 │   │ │
│  │  │ Events: ☑ All tracking events                                  │   │ │
│  │  └────────────────────────────────────────────────────────────────┘   │ │
│  │                                                                         │ │
│  └───────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  Then run:                                                                  │
│  heroku config:set SEVENTEEN_TRACK_API_KEY=17track_abc123xyz...            │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

STEP 4: TEST INSTALLATION (5 minutes)
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  4A. Install on Development Store                                           │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │  Visit: https://your-app-name.herokuapp.com/auth/shopify?            │  │
│  │         shop=your-dev-store.myshopify.com                             │  │
│  │                                                                       │  │
│  │  ↓ Redirects to Shopify                                              │  │
│  │                                                                       │  │
│  │  ┌──────────────────────────────────────────────────────────────┐   │  │
│  │  │ This app wants to access your store                         │   │  │
│  │  │                                                              │   │  │
│  │  │ Permissions:                                                 │   │  │
│  │  │ • Read orders                                                │   │  │
│  │  │ • Write orders                                               │   │  │
│  │  │ • Read fulfillments                                          │   │  │
│  │  │ • Write fulfillments                                         │   │  │
│  │  │                                                              │   │  │
│  │  │            [ Install app ]                                   │   │  │
│  │  └──────────────────────────────────────────────────────────────┘   │  │
│  │                                                                       │  │
│  │  ↓ Click "Install app"                                               │  │
│  │                                                                       │  │
│  │  ✓ Installation successful!                                          │  │
│  │                                                                       │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  4B. Create Test Order                                                      │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │  In Shopify Admin:                                                    │  │
│  │  1. Create product                                                    │  │
│  │  2. Create order                                                      │  │
│  │  3. Fulfill order with tracking: TEST123456789CN                     │  │
│  │                                                                       │  │
│  │  ↓ Webhook sent                                                       │  │
│  │                                                                       │  │
│  │  Your app receives webhook → Creates tracking → Registers with       │  │
│  │  17TRACK → Processes events → Shows on tracking page                 │  │
│  │                                                                       │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  4C. View Tracking Page                                                     │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │  Visit: https://your-dev-store.myshopify.com/apps/track/             │  │
│  │         TEST123456789CN                                               │  │
│  │                                                                       │  │
│  │  ┌────────────────────────────────────────────────────────────────┐ │  │
│  │  │  🔍 Track Your Order                                           │ │  │
│  │  │                                                                 │ │  │
│  │  │  Order #1001                    [In Transit]                   │ │  │
│  │  │  Tracking: TEST123456789CN                                     │ │  │
│  │  │                                                                 │ │  │
│  │  │  📦 Last Mile Carrier                                          │ │  │
│  │  │  USPS: 9400123456789000000001                                  │ │  │
│  │  │  [Track with USPS]                                             │ │  │
│  │  │                                                                 │ │  │
│  │  │  🛍️ Items in this order                                        │ │  │
│  │  │  • Product Name x1                                             │ │  │
│  │  │                                                                 │ │  │
│  │  │  📍 Tracking Updates                                           │ │  │
│  │  │  Jan 21, 9:00 AM  Handed over to USPS                         │ │  │
│  │  │  Jan 20, 3:30 PM  Arrived at US distribution center           │ │  │
│  │  │  Jan 17, 8:00 AM  In transit to United States                 │ │  │
│  │  │  Jan 15, 10:00 AM Shipment picked up ← (China removed!)       │ │  │
│  │  │                                                                 │ │  │
│  │  └────────────────────────────────────────────────────────────────┘ │  │
│  │                                                                       │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

STEP 5: GO LIVE! 🚀
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  OPTION A: Private App (Recommended for MVP)                                │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │  Share installation URL with merchants:                              │  │
│  │                                                                       │  │
│  │  https://your-app-name.herokuapp.com/auth/shopify?                   │  │
│  │  shop=MERCHANT_STORE.myshopify.com                                   │  │
│  │                                                                       │  │
│  │  ✓ No Shopify review needed                                          │  │
│  │  ✓ Launch immediately                                                │  │
│  │  ✓ Iterate quickly                                                   │  │
│  │                                                                       │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  OPTION B: Public App (Shopify App Store)                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │                                                                       │  │
│  │  1. Create app listing in Partners Dashboard                         │  │
│  │  2. Add description, screenshots, pricing                            │  │
│  │  3. Add privacy policy (required)                                    │  │
│  │  4. Submit for Shopify review                                        │  │
│  │  5. Wait 1-2 weeks for approval                                      │  │
│  │  6. App appears in Shopify App Store                                 │  │
│  │                                                                       │  │
│  │  ✓ Public discovery                                                  │  │
│  │  ✓ Shopify billing integration                                       │  │
│  │  ✓ Official listing                                                  │  │
│  │                                                                       │  │
│  └─────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

DATA FLOW (After Deployment)
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  Merchant fulfills order                                                    │
│         ↓                                                                    │
│  Shopify webhook → Your App                                                 │
│         ↓                                                                    │
│  Create Order + Tracking in DB                                              │
│         ↓                                                                    │
│  Job: Register with 17TRACK                                                 │
│         ↓                                                                    │
│  17TRACK tracks package                                                     │
│         ↓                                                                    │
│  17TRACK webhook → Your App (tracking updates)                              │
│         ↓                                                                    │
│  Job: Process event → Apply redaction → Store                              │
│         ↓                                                                    │
│  Customer visits tracking page                                              │
│         ↓                                                                    │
│  Shows redacted tracking info (no China!)                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

MONITORING
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  # View logs in real-time                                                   │
│  heroku logs --tail                                                         │
│                                                                              │
│  # Check dyno status                                                        │
│  heroku ps                                                                  │
│                                                                              │
│  # Database info                                                            │
│  heroku pg:info                                                             │
│                                                                              │
│  # Redis info                                                               │
│  heroku redis:info                                                          │
│                                                                              │
│  # Open Heroku dashboard                                                    │
│  heroku open                                                                │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

COST BREAKDOWN
┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│  Testing Phase (~$18/month):                                                │
│  • Eco web dyno: $5/mo                                                      │
│  • Eco worker dyno: $5/mo                                                   │
│  • PostgreSQL Essential: $5/mo                                              │
│  • Redis Mini: $3/mo                                                        │
│  • 17TRACK Free tier: $0/mo (100 requests/day)                              │
│                                                                              │
│  Production Phase (~$79/month):                                             │
│  • Basic web dyno: $7/mo                                                    │
│  • Basic worker dyno: $7/mo                                                 │
│  • PostgreSQL Standard: $50/mo                                              │
│  • Redis Premium: $15/mo                                                    │
│  • 17TRACK Paid: $29/mo (1,000 trackings)                                   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘

✅ YOU'RE DONE! Your app is live and ready for merchants!
